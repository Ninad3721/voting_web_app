¶B
LC:\Users\ninad.trivedi\source\repos\VotingApi\VotingApi\VotingApi\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. 
AddDbContext 
< 
ApplicationContext 0
>0 1
(1 2
options2 9
=>: <
options 
. 
UseSqlServer 
( 
builder  
.  !
Configuration! .
.. /
GetConnectionString/ B
(B C
$strC X
)X Y
)Y Z
)Z [
;[ \
builder 
. 
Services 
. 
AddCors 
( 
( 
options !
)! "
=># %
{ 
options 
. 
	AddPolicy 
( 
$str &
,& '
policy 
=> 
{ 
policy 
. 
AllowAnyHeader ,
(, -
)- .
;. /
policy 
. 
AllowAnyOrigin ,
(, -
)- .
;. /
policy 
. 
AllowAnyMethod ,
(, -
)- .
;. /
}   
)   
;   
}!! 
)!! 
;!! 
var$$ 
key$$ 
=$$ 	
Encoding$$
 
.$$ 
ASCII$$ 
.$$ 
GetBytes$$ !
($$! "
builder$$" )
.$$) *
Configuration$$* 7
[$$7 8
$str$$8 A
]$$A B
!$$B C
)$$C D
;$$D E
builder%% 
.%% 
Services%% 
.%% 
AddAuthentication%% "
(%%" #
options%%# *
=>%%+ -
{&& 
options'' 
.'' %
DefaultAuthenticateScheme'' %
=''& '
JwtBearerDefaults''( 9
.''9 : 
AuthenticationScheme'': N
;''N O
options(( 
.(( "
DefaultChallengeScheme(( "
=((# $
JwtBearerDefaults((% 6
.((6 7 
AuthenticationScheme((7 K
;((K L
})) 
)** 
.** 
AddJwtBearer** 
(** 
options** 
=>** 
{++ 
options,, 
.,,  
RequireHttpsMetadata,,  
=,,! "
false,,# (
;,,( )
options-- 
.-- 
	SaveToken-- 
=-- 
true-- 
;-- 
options.. 
... %
TokenValidationParameters.. %
=..& '
new..( +%
TokenValidationParameters.., E
{// $
ValidateIssuerSigningKey00  
=00! "
true00# '
,00' (
IssuerSigningKey11 
=11 
new11  
SymmetricSecurityKey11 3
(113 4
key114 7
)117 8
,118 9
ValidateIssuer22 
=22 
false22 
,22 
ValidateAudience33 
=33 
false33  
}44 
;44 
}55 
)55 
;55 
builder88 
.88 
Services88 
.88 
AddAutoMapper88 
(88 
typeof88 %
(88% &
AutoMapperConfig88& 6
)886 7
)887 8
;888 9
builder;; 
.;; 
Services;; 
.;; 
	AddScoped;; 
<;; 
IVoterService;; (
,;;( )
VoterService;;* 6
>;;6 7
(;;7 8
);;8 9
;;;9 :
builder<< 
.<< 
Services<< 
.<< 
	AddScoped<< 
<<< 
ICandidateService<< ,
,<<, -
CandidateService<<. >
><<> ?
(<<? @
)<<@ A
;<<A B
builder== 
.== 
Services== 
.== 
	AddScoped== 
<== 
ILoginService== (
,==( )
LoginService==* 6
>==6 7
(==7 8
)==8 9
;==9 :
builder>> 
.>> 
Services>> 
.>> 
	AddScoped>> 
<>> 
IAdminService>> (
,>>( )
AdminService>>* 6
>>>6 7
(>>7 8
)>>8 9
;>>9 :
builder?? 
.?? 
Services?? 
.?? 
	AddScoped?? 
<?? 
IPartyService?? (
,??( )
PartyService??* 6
>??6 7
(??7 8
)??8 9
;??9 :
builder@@ 
.@@ 
Services@@ 
.@@ 
	AddScoped@@ 
(@@ 
typeof@@ !
(@@! "
IGenericRepository@@" 4
<@@4 5
>@@5 6
)@@6 7
,@@7 8
typeof@@9 ?
(@@? @
GenericRepository@@@ Q
<@@Q R
>@@R S
)@@S T
)@@T U
;@@U V
builderCC 
.CC 
ServicesCC 
.CC 
AddSwaggerGenCC 
(CC 
optCC "
=>CC# %
{DD 
optEE 
.EE !
AddSecurityDefinitionEE 
(EE 
$strEE &
,EE& '
newEE( +!
OpenApiSecuritySchemeEE, A
{FF 
InGG 

=GG 
ParameterLocationGG 
.GG 
HeaderGG %
,GG% &
DescriptionHH 
=HH 
$strHH *
,HH* +
NameII 
=II 
$strII 
,II 
TypeJJ 
=JJ 
SecuritySchemeTypeJJ !
.JJ! "
HttpJJ" &
,JJ& '
BearerFormatKK 
=KK 
$strKK 
,KK 
SchemeLL 
=LL 
$strLL 
}MM 
)MM 
;MM 
optNN 
.NN "
AddSecurityRequirementNN 
(NN 
newNN "&
OpenApiSecurityRequirementNN# =
{OO 
{PP 	
newQQ !
OpenApiSecuritySchemeQQ %
{RR 
	ReferenceSS 
=SS 
newSS 
OpenApiReferenceSS  0
{TT 
TypeUU 
=UU 
ReferenceTypeUU &
.UU& '
SecuritySchemeUU' 5
,UU5 6
IdVV 
=VV 
$strVV 
}WW 
}XX 
,XX 
newYY 
stringYY 
[YY 
]YY 
{YY 
}YY 
}ZZ 	
}[[ 
)[[ 
;[[ 
}\\ 
)^^ 
;^^ 
var`` 
app`` 
=`` 	
builder``
 
.`` 
Build`` 
(`` 
)`` 
;`` 
ifcc 
(cc 
appcc 
.cc 
Environmentcc 
.cc 
IsDevelopmentcc !
(cc! "
)cc" #
)cc# $
{dd 
appee 
.ee 

UseSwaggeree 
(ee 
)ee 
;ee 
appff 
.ff 
UseSwaggerUIff 
(ff 
)ff 
;ff 
}gg 
apphh 
.hh 
UseCorshh 
(hh 
$strhh 
)hh 
;hh 
appjj 
.jj 
UseAuthenticationjj 
(jj 
)jj 
;jj 
appkk 
.kk 
UseAuthorizationkk 
(kk 
)kk 
;kk 
appnn 
.nn 
UseMiddlewarenn 
<nn -
!GlobalExceptionHandlingMiddlewarenn 3
>nn3 4
(nn4 5
)nn5 6
;nn6 7
apppp 
.pp 
MapControllerspp 
(pp 
)pp 
;pp 
varrr 
localIpAddressrr 
=rr 
$strrr  
;rr  !
varss 
portss 
=ss	 

$numss 
;ss 
apptt 
.tt 
Runtt 
(tt 
$"tt 

$strtt
 
{tt 
localIpAddresstt  
}tt  !
$strtt! "
{tt" #
porttt# '
}tt' (
"tt( )
)tt) *
;tt* +¥2
qC:\Users\ninad.trivedi\source\repos\VotingApi\VotingApi\VotingApi\Middleware\GlobalExceptionHandlingMiddleware.cs
	namespace 	
VotingApplication
 
. 
Api 
.  

Middleware  *
{ 
public 

class -
!GlobalExceptionHandlingMiddleware 2
{ 
private 
readonly 
RequestDelegate (
_next) .
;. /
private		 
readonly		 
ILogger		  
<		  !-
!GlobalExceptionHandlingMiddleware		! B
>		B C
_logger		D K
;		K L
public -
!GlobalExceptionHandlingMiddleware 0
(0 1
RequestDelegate1 @
nextA E
,E F
ILoggerG N
<N O-
!GlobalExceptionHandlingMiddlewareO p
>p q
loggerr x
)x y
{ 	
_next 
= 
next 
; 
_logger 
= 
logger 
; 
} 	
public 
async 
Task 
InvokeAsync %
(% &
HttpContext& 1
context2 9
)9 :
{ 	
try 
{ 
await 
_next 
( 
context #
)# $
;$ %
} 
catch 
(  
KeyNotFoundException '
ex( *
)* +
{ 
LogException 
( 
ex 
)  
;  !
context 
. 
Response  
.  !

StatusCode! +
=, -
StatusCodes. 9
.9 :
Status404NotFound: K
;K L
await 
context 
. 
Response &
.& '
WriteAsJsonAsync' 7
(7 8
new8 ;
ApiResponse< G
<G H
stringH N
?N O
>O P
(P Q
StatusCodesQ \
.\ ]
Status404NotFound] n
,n o
$strp r
,r s
ext v
.v w
Messagew ~
,~ 
$str
Ä î
)
î ï
)
ï ñ
;
ñ ó
} 
catch 
( %
InvalidOperationException ,
ex- /
)/ 0
{   
LogException"" 
("" 
ex"" 
)""  
;""  !
context## 
.## 
Response##  
.##  !

StatusCode##! +
=##, -
StatusCodes##. 9
.##9 :
Status400BadRequest##: M
;##M N
await$$ 
context$$ 
.$$ 
Response$$ &
.$$& '
WriteAsJsonAsync$$' 7
($$7 8
new$$8 ;
ApiResponse$$< G
<$$G H
string$$H N
?$$N O
>$$O P
($$P Q
StatusCodes$$Q \
.$$\ ]
Status400BadRequest$$] p
,$$p q
$str$$r t
,$$t u
ex$$v x
.$$x y
Message	$$y Ä
,
$$Ä Å
$str
$$Ç ö
)
$$ö õ
)
$$õ ú
;
$$ú ù
}%% 
catch&& 
(&& &
InvalidCredentialException&& -
ex&&. 0
)&&0 1
{'' 
LogException(( 
((( 
ex(( 
)((  
;((  !
context)) 
.)) 
Response))  
.))  !

StatusCode))! +
=)), -
StatusCodes)). 9
.))9 :
Status400BadRequest)): M
;))M N
await** 
context** 
.** 
Response** &
.**& '
WriteAsJsonAsync**' 7
(**7 8
new**8 ;
ApiResponse**< G
<**G H
string**H N
?**N O
>**O P
(**P Q
StatusCodes**Q \
.**\ ]
Status400BadRequest**] p
,**p q
$str**r t
,**t u
ex**v x
.**x y
Message	**y Ä
,
**Ä Å
$str
**Ç ú
)
**ú ù
)
**ù û
;
**û ü
}++ 
catch,, 
(,, 
	Exception,, 
ex,, 
),,  
{-- 
LogException// 
(// 
ex// 
)//  
;//  !
context00 
.00 
Response00  
.00  !

StatusCode00! +
=00, -
StatusCodes00. 9
.009 :(
Status500InternalServerError00: V
;00V W
await11 
context11 
.11 
Response11 &
.11& '
WriteAsJsonAsync11' 7
(117 8
new118 ;
ApiResponse11< G
<11G H
string11H N
?11N O
>11O P
(11P Q
StatusCodes11Q \
.11\ ]
Status404NotFound11] n
,11n o
$str11p r
,11r s
ex11t v
.11v w
Message11w ~
,11~ 
$str
11Ä ó
)
11ó ò
)
11ò ô
;
11ô ö
}22 
}33 	
private55 
void55 
LogException55 !
(55! "
	Exception55" +
ex55, .
)55. /
{66 	
var88 
logFilePath88 
=88 
$str88 3
;883 4
var:: 

logMessage:: 
=:: 
$":: 
{::  
DateTime::  (
.::( )
Now::) ,
:::, -
$str::- @
}::@ A
$str::A D
{::D E
ex::E G
.::G H
Message::H O
}::O P
$str::P S
{::S T
ex::T V
.::V W

StackTrace::W a
}::a b
$str::b f
"::f g
;::g h
	Directory== 
.== 
CreateDirectory== %
(==% &
Path==& *
.==* +
GetDirectoryName==+ ;
(==; <
logFilePath==< G
)==G H
!==H I
)==I J
;==J K
File@@ 
.@@ 
AppendAllText@@ 
(@@ 
logFilePath@@ *
,@@* +

logMessage@@, 6
)@@6 7
;@@7 8
_loggerBB 
.BB 
LogErrorBB 
(BB 
exBB 
,BB  
$strBB! 4
)BB4 5
;BB5 6
}CC 	
}DD 
}EE ÿj
`C:\Users\ninad.trivedi\source\repos\VotingApi\VotingApi\VotingApi\Controllers\VoterController.cs
	namespace		 	
VotingApplication		
 
.		 
Api		 
.		  
Controllers		  +
{

 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
[  
ProducesResponseType 
( 
StatusCodes %
.% &
Status200OK& 1
)1 2
]2 3
[  
ProducesResponseType 
( 
StatusCodes %
.% &
Status400BadRequest& 9
)9 :
]: ;
[  
ProducesResponseType 
( 
StatusCodes %
.% &
Status404NotFound& 7
)7 8
]8 9
[  
ProducesResponseType 
( 
StatusCodes %
.% &(
Status500InternalServerError& B
)B C
]C D
[  
ProducesResponseType 
( 
StatusCodes %
.% &
Status403Forbidden& 8
)8 9
]9 :
public 

class 
VoterController  
:! "
ControllerBase# 1
{ 
private 
readonly 
IVoterService &
_voterService' 4
;4 5
public 
VoterController 
( 
IVoterService ,
voterService- 9
)9 :
{ 	
_voterService 
= 
voterService (
;( )
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str "
)" #
]# $
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
AddVoter) 1
(1 2
[2 3
FromBody3 ;
]; <
CreateVoterDto= K
createVoterDtoL Z
)Z [
{   	
if!! 
(!! 
!!! 

ModelState!! 
.!! 
IsValid!! #
)!!# $
{"" 
return## 

BadRequest## !
(##! "
new##" %
ApiResponse##& 1
<##1 2 
ModelStateDictionary##2 F
>##F G
(##G H
StatusCodes$$ 
.$$  
Status400BadRequest$$  3
,$$3 4
new%%  
ModelStateDictionary%% ,
(%%, -
)%%- .
,%%. /

ModelState&& 
,&& 
$str'' >
)''> ?
)''? @
;''@ A
}(( 
var** 
res** 
=** 
await** 
_voterService** )
.**) *
AddVoter*** 2
(**2 3
createVoterDto**3 A
)**A B
;**B C
return,, 
Ok,, 
(,, 
new,, 
ApiResponse,, %
<,,% &
VoterResponseDto,,& 6
?,,6 7
>,,7 8
(,,8 9
StatusCodes-- 
.-- 
Status200OK-- '
,--' (
res.. 
,.. 
null// 
,// 
$str00 /
)00/ 0
)000 1
;001 2
}11 	
[44 	
	Authorize44	 
(44 
Roles44 
=44 
$str44 (
)44( )
]44) *
[55 	
HttpPost55	 
(55 
$str55  
)55  !
]55! "
public66 
async66 
Task66 
<66 
IActionResult66 '
>66' (
GetVoterById66) 5
(665 6
[666 7
	FromQuery667 @
]66@ A
long66B F
voterId66G N
)66N O
{77 	
if99 
(99 
voterId99 
<=99 
$num99 
)99 
{:: 
return;; 

BadRequest;; !
(;;! "
new;;" %
ApiResponse;;& 1
<;;1 2
string;;2 8
?;;8 9
>;;9 :
(;;: ;
StatusCodes<< 
.<<  
Status400BadRequest<<  3
,<<3 4
$str== 
,== 
$str>> 
,>> 
$str?? )
)??) *
)??* +
;??+ ,
}@@ 
varAA 
resAA 
=AA 
awaitAA 
_voterServiceAA )
.AA) *
GetVoterAA* 2
(AA2 3
voterIdAA3 :
)AA: ;
;AA; <
returnCC 
OkCC 
(CC 
newCC 
ApiResponseCC %
<CC% &
VoterResponseDtoCC& 6
?CC6 7
>CC7 8
(CC8 9
StatusCodesDD 
.DD 
Status200OKDD '
,DD' (
resEE 
,EE 
nullFF 
,FF 
$strGG -
)GG- .
)GG. /
;GG/ 0
}HH 	
[KK 	
	AuthorizeKK	 
(KK 
RolesKK 
=KK 
$strKK "
)KK" #
]KK# $
[LL 	
HttpGetLL	 
(LL 
$strLL >
)LL> ?
]LL? @
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' (
GetAllVoterMM) 4
(MM4 5
intMM5 8

pageNumberMM9 C
,MMC D
intMME H
pageSizeMMI Q
)MMQ R
{NN 	
varOO 
resOO 
=OO 
awaitOO 
_voterServiceOO )
.OO) *
GetAllVotersOO* 6
(OO6 7

pageNumberOO7 A
,OOA B
pageSizeOOC K
,OOK L
falseOOM R
)OOR S
;OOS T
returnPP 
OkPP 
(PP 
newPP 
ApiResponsePP %
<PP% &
IEnumerablePP& 1
<PP1 2
VoterPP2 7
>PP7 8
?PP8 9
>PP9 :
(QQ 
StatusCodesQQ 
.QQ 
Status200OKQQ (
,QQ( )
resRR 
,RR 
nullSS 
,SS 
$strTT 1
)TT1 2
)TT2 3
;TT3 4
}UU 	
[XX 	
	AuthorizeXX	 
(XX 
RolesXX 
=XX 
$strXX "
)XX" #
]XX# $
[YY 	
HttpPutYY	 
(YY 
$strYY -
)YY- .
]YY. /
publicZZ 
asyncZZ 
TaskZZ 
<ZZ 
IActionResultZZ '
>ZZ' (
UpdateVoterZZ) 4
(ZZ4 5
[ZZ5 6
FromBodyZZ6 >
]ZZ> ?
VoterUpdateDtoZZ@ N
voterUpdateDtoZZO ]
,ZZ] ^
longZZ_ c
voterIdZZd k
)ZZk l
{[[ 	
if]] 
(]] 
voterId]] 
<=]] 
$num]] 
)]] 
{^^ 
return__ 

BadRequest__ !
(__! "
new__" %
ApiResponse__& 1
<__1 2
string__2 8
?__8 9
>__9 :
(__: ;
StatusCodes`` 
.``  
Status400BadRequest``  3
,``3 4
$straa 
,aa 
$strbb 
,bb 
$strcc )
)cc) *
)cc* +
;cc+ ,
}dd 
ifff 
(ff 
!ff 

ModelStateff 
.ff 
IsValidff #
)ff# $
{gg 
returnhh 

BadRequesthh !
(hh! "
newhh" %
ApiResponsehh& 1
<hh1 2 
ModelStateDictionaryhh2 F
>hhF G
(hhG H
StatusCodesii 
.ii  
Status400BadRequestii  3
,ii3 4
newjj  
ModelStateDictionaryjj ,
(jj, -
)jj- .
,jj. /

ModelStatekk 
,kk 
$strll :
)ll: ;
)ll; <
;ll< =
}mm 
varoo 
resoo 
=oo 
awaitoo 
_voterServiceoo )
.oo) *
UpdateVoteroo* 5
(oo5 6
voterUpdateDtooo6 D
,ooD E
voterIdooF M
)ooM N
;ooN O
returnpp 
Okpp 
(pp 
newpp 
ApiResponsepp %
<pp% &
VoterResponseDtopp& 6
?pp6 7
>pp7 8
(pp8 9
StatusCodesqq 
.qq 
Status200OKqq '
,qq' (
resrr 
,rr 
nullss 
,ss 
$strtt ,
)tt, -
)tt- .
;tt. /
}uu 	
[xx 	
	Authorizexx	 
(xx 
Rolesxx 
=xx 
$strxx "
)xx" #
]xx# $
[yy 	

HttpDeleteyy	 
(yy 
$stryy 0
)yy0 1
]yy1 2
publiczz 
asynczz 
Taskzz 
<zz 
IActionResultzz '
>zz' (
DeleteVoterzz) 4
(zz4 5
longzz5 9
voterIdzz: A
)zzA B
{{{ 	
if}} 
(}} 
voterId}} 
<=}} 
$num}} 
)}} 
{~~ 
return 

BadRequest !
(! "
new" %
ApiResponse& 1
<1 2
string2 8
?8 9
>9 :
(: ;
StatusCodes
ÄÄ 
.
ÄÄ  !
Status400BadRequest
ÄÄ  3
,
ÄÄ3 4
$str
ÅÅ 
,
ÅÅ 
$str
ÇÇ 
,
ÇÇ 
$str
ÉÉ )
)
ÉÉ) *
)
ÉÉ* +
;
ÉÉ+ ,
}
ÑÑ 
var
ÜÜ 
res
ÜÜ 
=
ÜÜ 
await
ÜÜ 
_voterService
ÜÜ )
.
ÜÜ) *
DeleteVoter
ÜÜ* 5
(
ÜÜ5 6
voterId
ÜÜ6 =
)
ÜÜ= >
;
ÜÜ> ?
return
áá 
Ok
áá 
(
áá 
new
áá 
ApiResponse
áá %
<
áá% &
VoterResponseDto
áá& 6
?
áá6 7
>
áá7 8
(
áá8 9
StatusCodes
àà 
.
àà 
Status200OK
àà '
,
àà' (
res
ââ 
,
ââ 
null
ää 
,
ää 
$str
ãã ,
)
ãã, -
)
ãã- .
;
ãã. /
}
åå 	
[
èè 	
HttpPost
èè	 
(
èè 
$str
èè #
)
èè# $
]
èè$ %
[
êê 	
	Authorize
êê	 
(
êê 
Roles
êê 
=
êê 
$str
êê "
)
êê" #
]
êê# $
public
ëë 
async
ëë 
Task
ëë 
<
ëë 
IActionResult
ëë '
>
ëë' (
VoteToCandidate
ëë) 8
(
ëë8 9
long
ëë9 =
candidateId
ëë> I
,
ëëI J
long
ëëK O
voterId
ëëP W
)
ëëW X
{
íí 	
if
ìì 
(
ìì 
candidateId
ìì 
<=
ìì 
$num
ìì  
||
ìì! #
voterId
ìì$ +
<=
ìì, .
$num
ìì/ 0
)
ìì0 1
{
îî 
return
ïï 
Ok
ïï 
(
ïï 
new
ïï 
ApiResponse
ïï )
<
ïï) *
string
ïï* 0
?
ïï0 1
>
ïï1 2
(
ïï2 3
StatusCodes
ññ  
.
ññ  !!
Status400BadRequest
ññ! 4
,
ññ4 5
$str
óó 
,
óó 
$str
òò 
,
òò 
$str
ôô )
)
ôô) *
)
ôô* +
;
ôô+ ,
}
öö 
var
úú 
res
úú 
=
úú 
await
úú 
_voterService
úú )
.
úú) *
VoteToCandidate
úú* 9
(
úú9 :
candidateId
úú: E
,
úúE F
voterId
úúG N
)
úúN O
;
úúO P
return
ùù 
Ok
ùù 
(
ùù 
new
ùù 
ApiResponse
ùù %
<
ùù% &
VoterResponseDto
ùù& 6
?
ùù6 7
>
ùù7 8
(
ùù8 9
StatusCodes
ûû 
.
ûû 
Status200OK
ûû '
,
ûû' (
res
üü 
,
üü 
null
†† 
,
†† 
$str
°° #
)
°°# $
)
°°$ %
;
°°% &
}
¢¢ 	
[
§§ 	
HttpGet
§§	 
(
§§ 
$str
§§ *
)
§§* +
]
§§+ ,
[
•• 	
	Authorize
••	 
(
•• 
Roles
•• 
=
•• 
$str
•• "
)
••" #
]
••# $
public
¶¶ 
async
¶¶ 
Task
¶¶ 
<
¶¶ 
IActionResult
¶¶ '
>
¶¶' (
SearchByVoterName
¶¶) :
(
¶¶: ;
string
¶¶; A
	voterName
¶¶B K
)
¶¶K L
{
ßß 	
var
®® 
res
®® 
=
®® 
await
®® 
_voterService
®® )
.
®®) *
SearchVoterByName
®®* ;
(
®®; <
	voterName
®®< E
)
®®E F
;
®®F G
return
©© 
Ok
©© 
(
©© 
new
©© 
ApiResponse
©© %
<
©©% &
IEnumerable
©©& 1
<
©©1 2
Voter
©©2 7
>
©©7 8
?
©©8 9
>
©©9 :
(
©©: ;
StatusCodes
™™ 
.
™™ 
Status200OK
™™ '
,
™™' (
res
´´ 
,
´´ 
null
¨¨ 
,
¨¨ 
$str
≠≠ ,
)
≠≠, -
)
≠≠- .
;
≠≠. /
}
ÆÆ 	
}
ØØ 
}∞∞ ¯Y
`C:\Users\ninad.trivedi\source\repos\VotingApi\VotingApi\VotingApi\Controllers\PartyController.cs
	namespace		 	
VotingApplication		
 
.		 
Api		 
.		  
Controllers		  +
{

 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
[  
ProducesResponseType 
( 
StatusCodes %
.% &
Status200OK& 1
)1 2
]2 3
[  
ProducesResponseType 
( 
StatusCodes %
.% &
Status400BadRequest& 9
)9 :
]: ;
[  
ProducesResponseType 
( 
StatusCodes %
.% &
Status404NotFound& 7
)7 8
]8 9
[  
ProducesResponseType 
( 
StatusCodes %
.% &(
Status500InternalServerError& B
)B C
]C D
public 

class 
PartyController  
:! "

Controller# -
{ 
private 
readonly 
IPartyService &
_partyService' 4
;4 5
public 
PartyController 
( 
IPartyService ,
partyService- 9
)9 :
{ 	
_partyService 
= 
partyService (
;( )
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
[ 	
	Authorize	 
( 
Roles 
= 
$str "
)" #
]# $
public 
async 
Task 
< 
IActionResult '
>' (
AddParty) 1
(1 2
[2 3
FromBody3 ;
]; <
CreatePartyDto= K
createPartyDtoL Z
)Z [
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
return   

BadRequest   !
(  ! "
new  " %
ApiResponse  & 1
<  1 2 
ModelStateDictionary  2 F
>  F G
(  G H
StatusCodes!! 
.!!  
Status400BadRequest!!  3
,!!3 4
new""  
ModelStateDictionary"" ,
("", -
)""- .
,"". /

ModelState## 
,## 
$str$$ >
)$$> ?
)$$? @
;$$@ A
}%% 
var'' 
res'' 
='' 
await'' 
_partyService'' )
.'') *
AddParty''* 2
(''2 3
createPartyDto''3 A
)''A B
;''B C
return)) 
Ok)) 
()) 
new)) 
ApiResponse)) %
<))% &
PartyResponseDto))& 6
?))6 7
>))7 8
())8 9
StatusCodes** 
.** 
Status200OK** '
,**' (
res++ 
,++ 
null,, 
,,, 
$str-- /
)--/ 0
)--0 1
;--1 2
}.. 	
[00 	
	Authorize00	 
(00 
Roles00 
=00 
$str00 "
)00" #
]00# $
[11 	
HttpGet11	 
(11 
$str11 
)11  
]11  !
public22 
async22 
Task22 
<22 
IActionResult22 '
>22' (
GetPartyById22) 5
(225 6
[226 7
	FromQuery227 @
]22@ A
long22B F
partyId22G N
)22N O
{33 	
if55 
(55 
partyId55 
<=55 
$num55 
)55 
{66 
return77 

BadRequest77 !
(77! "
new77" %
ApiResponse77& 1
<771 2
string772 8
?778 9
>779 :
(77: ;
StatusCodes88 
.88  
Status400BadRequest88  3
,883 4
$str99 
,99 
$str:: 
,:: 
$str;; )
);;) *
);;* +
;;;+ ,
}<< 
var== 
res== 
=== 
await== 
_partyService== )
.==) *
GetPartyById==* 6
(==6 7
partyId==7 >
)==> ?
;==? @
return>> 
Ok>> 
(>> 
new>> 
ApiResponse>> %
<>>% &
PartyResponseDto>>& 6
?>>6 7
>>>7 8
(>>8 9
StatusCodes?? 
.?? 
Status200OK?? '
,??' (
res@@ 
,@@ 
nullAA 
,AA 
$strBB -
)BB- .
)BB. /
;BB/ 0
}CC 	
[EE 	
	AuthorizeEE	 
(EE 
RolesEE 
=EE 
$strEE "
)EE" #
]EE# $
[FF 	
HttpGetFF	 
(FF 
$strFF P
)FFP Q
]FFQ R
publicGG 
asyncGG 
TaskGG 
<GG 
IActionResultGG '
>GG' (
GetAllPartyGG) 4
(GG4 5
intGG5 8

pageNumberGG9 C
,GGC D
intGGE H
pageSizeGGI Q
,GGQ R
boolGGS W
fetchAllGGX `
)GG` a
{HH 	
varII 
resII 
=II 
awaitII 
_partyServiceII )
.II) *
GetAllPartiesII* 7
(II7 8

pageNumberII8 B
,IIB C
pageSizeIID L
,IIL M
fetchAllIIN V
)IIV W
;IIW X
returnJJ 
OkJJ 
(JJ 
newJJ 
ApiResponseJJ %
<JJ% &
IEnumerableJJ& 1
<JJ1 2
PartyJJ2 7
>JJ7 8
?JJ8 9
>JJ9 :
(KK 
StatusCodesKK 
.KK 
Status200OKKK (
,KK( )
resLL 
,LL 
nullMM 
,MM 
$strNN 0
)NN0 1
)NN1 2
;NN2 3
}OO 	
[QQ 	
	AuthorizeQQ	 
(QQ 
RolesQQ 
=QQ 
$strQQ "
)QQ" #
]QQ# $
[RR 	

HttpDeleteRR	 
(RR 
$strRR !
)RR! "
]RR" #
publicSS 
asyncSS 
TaskSS 
<SS 
IActionResultSS '
>SS' (
DeletePartySS) 4
(SS4 5
[SS5 6
	FromQuerySS6 ?
]SS? @
longSSA E
partyIdSSF M
)SSM N
{TT 	
ifVV 
(VV 
partyIdVV 
<=VV 
$numVV 
)VV 
{WW 
returnXX 

BadRequestXX !
(XX! "
newXX" %
ApiResponseXX& 1
<XX1 2
stringXX2 8
?XX8 9
>XX9 :
(XX: ;
StatusCodesYY 
.YY  
Status400BadRequestYY  3
,YY3 4
$strZZ 
,ZZ 
$str[[ 
,[[ 
$str\\ )
)\\) *
)\\* +
;\\+ ,
}]] 
var^^ 
res^^ 
=^^ 
await^^ 
_partyService^^ )
.^^) *
DeleteParty^^* 5
(^^5 6
partyId^^6 =
)^^= >
;^^> ?
return__ 
Ok__ 
(__ 
new__ 
ApiResponse__ %
<__% &
PartyResponseDto__& 6
?__6 7
>__7 8
(__8 9
StatusCodes`` 
.`` 
Status200OK`` '
,``' (
resaa 
,aa 
nullbb 
,bb 
$strcc ,
)cc, -
)cc- .
;cc. /
}dd 	
[ff 	
	Authorizeff	 
(ff 
Rolesff 
=ff 
$strff "
)ff" #
]ff# $
[gg 	
HttpPutgg	 
(gg 
$strgg -
)gg- .
]gg. /
publichh 
asynchh 
Taskhh 
<hh 
IActionResulthh '
>hh' (
UpdateCandidatehh) 8
(hh8 9
[hh9 :
FromBodyhh: B
]hhB C
UpdatePartyDtohhD R
updatePartyDtohhS a
,hha b
longhhc g
partyIdhhh o
)hho p
{ii 	
ifkk 
(kk 
partyIdkk 
<=kk 
$numkk 
)kk 
{ll 
returnmm 

BadRequestmm !
(mm! "
newmm" %
ApiResponsemm& 1
<mm1 2
stringmm2 8
?mm8 9
>mm9 :
(mm: ;
StatusCodesnn 
.nn  
Status400BadRequestnn  3
,nn3 4
$stroo 
,oo 
$strpp 
,pp 
$strqq )
)qq) *
)qq* +
;qq+ ,
}rr 
ifss 
(ss 
!ss 

ModelStatess 
.ss 
IsValidss #
)ss# $
{tt 
returnuu 

BadRequestuu !
(uu! "
newuu" %
ApiResponseuu& 1
<uu1 2 
ModelStateDictionaryuu2 F
?uuF G
>uuG H
(uuH I
StatusCodesvv 
.vv  
Status400BadRequestvv  3
,vv3 4
nullww 
,ww 

ModelStatexx 
,xx 
$stryy 3
)yy3 4
)yy4 5
;yy5 6
}zz 
var|| 
res|| 
=|| 
await|| 
_partyService|| )
.||) *
UpdateParty||* 5
(||5 6
updatePartyDto||6 D
,||D E
partyId||F M
)||M N
;||N O
return}} 
Ok}} 
(}} 
new}} 
ApiResponse}} %
<}}% &
PartyResponseDto}}& 6
?}}6 7
>}}7 8
(}}8 9
StatusCodes~~ 
.~~ 
Status200OK~~ '
,~~' (
res 
, 
null
ÄÄ 
,
ÄÄ 
$str
ÅÅ ,
)
ÅÅ, -
)
ÅÅ- .
;
ÅÅ. /
}
ÇÇ 	
[
ÑÑ 	
HttpGet
ÑÑ	 
(
ÑÑ 
$str
ÑÑ *
)
ÑÑ* +
]
ÑÑ+ ,
[
ÖÖ 	
	Authorize
ÖÖ	 
(
ÖÖ 
Roles
ÖÖ 
=
ÖÖ 
$str
ÖÖ "
)
ÖÖ" #
]
ÖÖ# $
public
ÜÜ 
async
ÜÜ 
Task
ÜÜ 
<
ÜÜ 
IActionResult
ÜÜ '
>
ÜÜ' (
SearchByPartyName
ÜÜ) :
(
ÜÜ: ;
string
ÜÜ; A
	partyName
ÜÜB K
)
ÜÜK L
{
áá 	
var
àà 
res
àà 
=
àà 
await
àà 
_partyService
àà )
.
àà) *
SearchByPartyName
àà* ;
(
àà; <
	partyName
àà< E
)
ààE F
;
ààF G
return
ââ 
Ok
ââ 
(
ââ 
new
ââ 
ApiResponse
ââ %
<
ââ% &
IEnumerable
ââ& 1
<
ââ1 2
Party
ââ2 7
>
ââ7 8
?
ââ8 9
>
ââ9 :
(
ââ: ;
StatusCodes
ää 
.
ää 
Status200OK
ää '
,
ää' (
res
ãã 
,
ãã 
null
åå 
,
åå 
$str
çç ,
)
çç, -
)
çç- .
;
çç. /
}
éé 	
}
èè 
}êê ß
`C:\Users\ninad.trivedi\source\repos\VotingApi\VotingApi\VotingApi\Controllers\LoginController.cs
	namespace 	
VotingApplication
 
. 
Api 
.  
Controllers  +
{		 
public

 

class

 
LoginController

  
:

! "

Controller

# -
{ 
private 
readonly 
ILoginService &
_loginService' 4
;4 5
public 
LoginController 
( 
ILoginService ,
loginService- 9
)9 :
{ 	
_loginService 
= 
loginService (
;( )
} 	
[ 	
AllowAnonymous	 
] 
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
login) .
(. /
[/ 0
FromBody0 8
]8 9
LoginDto: B
loginDtoC K
)K L
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
return 

BadRequest !
(! "
new" %
ApiResponse& 1
<1 2 
ModelStateDictionary2 F
>F G
(G H
StatusCodes 
.  
Status400BadRequest  3
,3 4
new  
ModelStateDictionary ,
(, -
)- .
,. /

ModelState 
, 
$str >
)> ?
)? @
;@ A
} 
var   
loginResponse   
=   
await    %
_loginService  & 3
.  3 4
Login  4 9
(  9 :
loginDto  : B
)  B C
;  C D
return!! 
Ok!! 
(!! 
new!! 
ApiResponse!! %
<!!% &
LoginResponseDto!!& 6
?!!6 7
>!!7 8
(!!8 9
StatusCodes"" 
."" 
Status200OK"" '
,""' (
loginResponse## !
,##! "
null$$ 
,$$ 
$str%% 1
)&& 
)&& 
;&& 
}'' 	
[)) 	
HttpPost))	 
()) 
$str)) 0
)))0 1
]))1 2
public** 
async** 
Task** 
<** 
IActionResult** '
>**' ('
generateJwtFromRefreshToken**) D
(**D E
[**E F
FromBody**F N
]**N O
RefreshTokenDto**P _
refreshTokenDto**` o
)**o p
{++ 	
var,, 
res,, 
=,, 
await,, 
_loginService,, )
.,,) *'
GenerateJwtFromRefreshToken,,* E
(,,E F
refreshTokenDto,,F U
.,,U V
RefreshToken,,V b
),,b c
;,,c d
return-- 
Ok-- 
(-- 
new-- 
ApiResponse-- %
<--% &
LoginResponseDto--& 6
?--6 7
>--7 8
(--8 9
StatusCodes.. 
... 
Status200OK.. '
,..' (
res// 
,// 
null00 
,00 
$str11 ,
)22 
)22 
;22 
}33 	
}44 
}55 õi
dC:\Users\ninad.trivedi\source\repos\VotingApi\VotingApi\VotingApi\Controllers\CandidateController.cs
	namespace		 	
VotingApplication		
 
.		 
Api		 
.		  
Controllers		  +
{

 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
[  
ProducesResponseType 
( 
StatusCodes %
.% &
Status200OK& 1
)1 2
]2 3
[  
ProducesResponseType 
( 
StatusCodes %
.% &
Status400BadRequest& 9
)9 :
]: ;
[  
ProducesResponseType 
( 
StatusCodes %
.% &
Status404NotFound& 7
)7 8
]8 9
[  
ProducesResponseType 
( 
StatusCodes %
.% &
Status403Forbidden& 8
)8 9
]9 :
[  
ProducesResponseType 
( 
StatusCodes %
.% &(
Status500InternalServerError& B
)B C
]C D
public 

class 
CandidateController $
:% &
ControllerBase' 5
{ 
private 
readonly 
ICandidateService *
_candidateService+ <
;< =
public 
CandidateController "
(" #
ICandidateService# 4
service5 <
)< =
{ 	
_candidateService 
= 
service  '
;' (
} 	
[ 	
	Authorize	 
( 
Roles 
= 
$str "
)" #
]# $
[ 	
HttpPost	 
( 
$str  
)  !
]! "
public   
async   
Task   
<   
IActionResult   '
>  ' (
AddCandidate  ) 5
(  5 6
[  6 7
FromBody  7 ?
]  ? @
CreateCandidateDto  A S
createCandidateDto  T f
)  f g
{!! 	
if"" 
("" 
!"" 

ModelState"" 
."" 
IsValid"" #
)""# $
{## 
return$$ 

BadRequest$$ !
($$! "
new$$" %
ApiResponse$$& 1
<$$1 2 
ModelStateDictionary$$2 F
?$$F G
>$$G H
($$H I
StatusCodes%% 
.%%  
Status400BadRequest%%  3
,%%3 4
null&& 
,&& 

ModelState'' 
,'' 
$str(( ?
)((? @
)((@ A
;((A B
})) 
var++ 
res++ 
=++ 
await++ 
_candidateService++ -
.++- .
AddCandidate++. :
(++: ;
createCandidateDto++; M
)++M N
;++N O
return,, 
Ok,, 
(,, 
new,, 
ApiResponse,, %
<,,% & 
CandidateResponseDto,,& :
?,,: ;
>,,; <
(,,< =
StatusCodes-- 
.-- 
Status200OK-- '
,--' (
res.. 
,.. 
null// 
,// 
$str00 0
)000 1
)001 2
;002 3
}11 	
[44 	
	Authorize44	 
]44 
[55 	
HttpGet55	 
(55 
$str55 6
)556 7
]557 8
public66 
async66 
Task66 
<66 
IActionResult66 '
>66' (
GetCandidateById66) 9
(669 :
long66: >
candidateId66? J
)66J K
{77 	
if99 
(99 
candidateId99 
<=99 
$num99  
)99  !
{:: 
return;; 

BadRequest;; !
(;;! "
new;;" %
ApiResponse;;& 1
<;;1 2
string;;2 8
?;;8 9
>;;9 :
(;;: ;
StatusCodes<< 
.<<  
Status400BadRequest<<  3
,<<3 4
$str== 
,== 
$str>> 
,>> 
$str?? )
)??) *
)??* +
;??+ ,
}@@ 
varBB 
resBB 
=BB 
awaitBB 
_candidateServiceBB -
.BB- .
GetCandidateBB. :
(BB: ;
candidateIdBB; F
)BBF G
;BBG H
returnCC 
OkCC 
(CC 
newCC 
ApiResponseCC %
<CC% & 
CandidateResponseDtoCC& :
?CC: ;
>CC; <
(CC< =
StatusCodesDD 
.DD 
Status200OKDD '
,DD' (
resEE 
,EE 
nullFF 
,FF 
$strGG 0
)HH 
)HH 
;HH 
}II 	
[LL 	
	AuthorizeLL	 
]LL 
[MM 	
HttpGetMM	 
(MM 
$strMM B
)MMB C
]MMC D
publicNN 
asyncNN 
TaskNN 
<NN 
IActionResultNN '
>NN' (
GetAllCandidateNN) 8
(NN8 9
intNN9 <

pageNumberNN= G
,NNG H
intNNI L
pageSizeNNM U
)NNU V
{OO 	
ifPP 
(PP 
pageSizePP 
<=PP 
$numPP 
||PP  

pageNumberPP! +
<=PP, .
$numPP/ 0
)PP0 1
{QQ 
returnRR 

BadRequestRR !
(RR! "
newRR" %
ApiResponseRR& 1
<RR1 2
stringRR2 8
>RR8 9
(RR9 :
StatusCodesTT  
.TT  !
Status400BadRequestTT! 4
,TT4 5
$strUU 
,UU 
$strVV 8
,VV8 9
$strWW 
)XX 
)XX 
;XX 
}YY 
varZZ 
resZZ 
=ZZ 
awaitZZ 
_candidateServiceZZ -
.ZZ- .
GetAllCandidateZZ. =
(ZZ= >

pageNumberZZ> H
,ZZH I
pageSizeZZJ R
,ZZR S
falseZZT Y
)ZZY Z
;ZZZ [
return[[ 
Ok[[ 
([[ 
new[[ 
ApiResponse[[ %
<[[% &
IEnumerable[[& 1
<[[1 2
	Candidate[[2 ;
>[[; <
?[[< =
>[[= >
([[> ?
StatusCodes\\ 
.\\ 
Status200OK\\ '
,\\' (
res]] 
,]] 
null^^ 
,^^ 
$str__ (
)__( )
)__) *
;__* +
}`` 	
[cc 	
	Authorizecc	 
(cc 
Rolescc 
=cc 
$strcc "
)cc" #
]cc# $
[dd 	
HttpPutdd	 
(dd 
$strdd 5
)dd5 6
]dd6 7
publicee 
asyncee 
Taskee 
<ee 
IActionResultee '
>ee' (
UpdateCandidateee) 8
(ee8 9
[ee9 :
FromBodyee: B
]eeB C
CandidateUpdateDtoeeD V
candidateUpdateDtoeeW i
,eei j
longeek o
candidateIdeep {
)ee{ |
{ff 	
ifhh 
(hh 
candidateIdhh 
<=hh 
$numhh  
)hh  !
{ii 
returnjj 

BadRequestjj !
(jj! "
newjj" %
ApiResponsejj& 1
<jj1 2
stringjj2 8
?jj8 9
>jj9 :
(jj: ;
StatusCodeskk 
.kk  
Status400BadRequestkk  3
,kk3 4
$strll 
,ll 
$strmm 
,mm 
$strnn )
)nn) *
)nn* +
;nn+ ,
}oo 
ifpp 
(pp 
!pp 

ModelStatepp 
.pp 
IsValidpp #
)pp# $
{qq 
returnrr 

BadRequestrr !
(rr! "
newrr" %
ApiResponserr& 1
<rr1 2 
ModelStateDictionaryrr2 F
?rrF G
>rrG H
(rrH I
StatusCodesss 
.ss  
Status400BadRequestss  3
,ss3 4
nulltt 
,tt 

ModelStateuu 
,uu 
$strvv 3
)vv3 4
)vv4 5
;vv5 6
}ww 
varyy 
resyy 
=yy 
awaityy 
_candidateServiceyy -
.yy- .
UpdateCandidateyy. =
(yy= >
candidateUpdateDtoyy> P
,yyP Q
candidateIdyyR ]
)yy] ^
;yy^ _
returnzz 
Okzz 
(zz 
newzz 
ApiResponsezz %
<zz% & 
CandidateResponseDtozz& :
?zz: ;
>zz; <
(zz< =
StatusCodes{{ 
.{{ 
Status200OK{{ '
,{{' (
res|| 
,|| 
null}} 
,}} 
$str~~ 0
)~~0 1
)~~1 2
;~~2 3
} 	
[
ÇÇ 	
	Authorize
ÇÇ	 
(
ÇÇ 
Roles
ÇÇ 
=
ÇÇ 
$str
ÇÇ "
)
ÇÇ" #
]
ÇÇ# $
[
ÉÉ 	

HttpDelete
ÉÉ	 
(
ÉÉ 
$str
ÉÉ 8
)
ÉÉ8 9
]
ÉÉ9 :
public
ÑÑ 
async
ÑÑ 
Task
ÑÑ 
<
ÑÑ 
IActionResult
ÑÑ '
>
ÑÑ' (
DeleteCandiate
ÑÑ) 7
(
ÑÑ7 8
long
ÑÑ8 <
candidateId
ÑÑ= H
)
ÑÑH I
{
ÖÖ 	
if
ÜÜ 
(
ÜÜ 
candidateId
ÜÜ 
<=
ÜÜ 
$num
ÜÜ  
)
ÜÜ  !
{
áá 
return
àà 

BadRequest
àà !
(
àà! "
new
àà" %
ApiResponse
àà& 1
<
àà1 2
string
àà2 8
?
àà8 9
>
àà9 :
(
àà: ;
StatusCodes
ââ 
.
ââ  !
Status400BadRequest
ââ  3
,
ââ3 4
$str
ää 
,
ää 
$str
ãã 
,
ãã 
$str
åå )
)
åå) *
)
åå* +
;
åå+ ,
}
çç 
var
èè 
res
èè 
=
èè 
await
èè 
_candidateService
èè -
.
èè- .
DeleteCandidate
èè. =
(
èè= >
candidateId
èè> I
)
èèI J
;
èèJ K
return
êê 
Ok
êê 
(
êê 
new
êê 
ApiResponse
êê %
<
êê% &"
CandidateResponseDto
êê& :
?
êê: ;
>
êê; <
(
êê< =
StatusCodes
ëë 
.
ëë 
Status200OK
ëë '
,
ëë' (
res
íí 
,
íí 
null
ìì 
,
ìì 
$str
îî 0
)
îî0 1
)
îî1 2
;
îî2 3
}
ïï 	
[
òò 	
	Authorize
òò	 
(
òò 
Roles
òò 
=
òò 
$str
òò (
)
òò( )
]
òò) *
[
ôô 	
HttpGet
ôô	 
(
ôô 
$str
ôô )
)
ôô) *
]
ôô* +
public
öö 
async
öö 
Task
öö 
<
öö 
IActionResult
öö '
>
öö' (#
GetTopThreeCandidates
öö) >
(
öö> ?
)
öö? @
{
õõ 	
var
úú $
topThreeCandidateArray
úú &
=
úú' (
await
úú) .
_candidateService
úú/ @
.
úú@ A$
GeetTopThreeCandidates
úúA W
(
úúW X
)
úúX Y
;
úúY Z
return
ùù 
Ok
ùù 
(
ùù 
new
ùù 
ApiResponse
ùù %
<
ùù% &
IEnumerable
ùù& 1
<
ùù1 2
	Candidate
ùù2 ;
>
ùù; <
?
ùù< =
>
ùù= >
(
ùù> ?
StatusCodes
ûû 
.
ûû 
Status200OK
ûû '
,
ûû' ($
topThreeCandidateArray
üü &
,
üü& '
null
†† 
,
†† 
$str
°° :
)
°°: ;
)
°°; <
;
°°< =
}
¢¢ 	
[
§§ 	
HttpGet
§§	 
(
§§ 
$str
§§ 2
)
§§2 3
]
§§3 4
[
•• 	
	Authorize
••	 
(
•• 
Roles
•• 
=
•• 
$str
•• (
)
••( )
]
••) *
public
¶¶ 
async
¶¶ 
Task
¶¶ 
<
¶¶ 
IActionResult
¶¶ '
>
¶¶' (#
SearchByCandidateName
¶¶) >
(
¶¶> ?
string
¶¶? E
candidateName
¶¶F S
)
¶¶S T
{
ßß 	
var
®® 
res
®® 
=
®® 
await
®® 
_candidateService
®® -
.
®®- .#
SearchByCandidateName
®®. C
(
®®C D
candidateName
®®D Q
)
®®Q R
;
®®R S
return
©© 
Ok
©© 
(
©© 
new
©© 
ApiResponse
©© %
<
©©% &
IEnumerable
©©& 1
<
©©1 2
	Candidate
©©2 ;
>
©©; <
?
©©< =
>
©©= >
(
©©> ?
StatusCodes
™™ 
.
™™ 
Status200OK
™™ '
,
™™' (
res
´´ 
,
´´ 
null
¨¨ 
,
¨¨ 
$str
≠≠ 0
)
≠≠0 1
)
≠≠1 2
;
≠≠2 3
}
ÆÆ 	
}
ØØ 
}∞∞ ∞/
`C:\Users\ninad.trivedi\source\repos\VotingApi\VotingApi\VotingApi\Controllers\AdminController.cs
	namespace		 	
VotingApplication		
 
.		 
Api		 
.		  
Controllers		  +
{

 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
[  
ProducesResponseType 
( 
StatusCodes %
.% &
Status200OK& 1
)1 2
]2 3
[  
ProducesResponseType 
( 
StatusCodes %
.% &
Status400BadRequest& 9
)9 :
]: ;
[  
ProducesResponseType 
( 
StatusCodes %
.% &
Status404NotFound& 7
)7 8
]8 9
[  
ProducesResponseType 
( 
StatusCodes %
.% &(
Status500InternalServerError& B
)B C
]C D
public 

class 
AdminController  
:! "

Controller# -
{ 
private 
readonly 
IAdminService &
_adminService' 4
;4 5
public 
AdminController 
( 
IAdminService ,
adminService- 9
)9 :
{ 	
_adminService 
= 
adminService (
;( )
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
AddAdmin) 1
(1 2
[2 3
FromBody3 ;
]; <
CreateAdminDto= K
createAdminDtoL Z
)Z [
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
return 

BadRequest !
(! "
new" %
ApiResponse& 1
<1 2 
ModelStateDictionary2 F
>F G
(G H
StatusCodes   
.    
Status400BadRequest    3
,  3 4
new!!  
ModelStateDictionary!! ,
(!!, -
)!!- .
,!!. /

ModelState"" 
,"" 
$str## >
)##> ?
)##? @
;##@ A
}$$ 
var&& 
res&& 
=&& 
await&& 
_adminService&& )
.&&) *
AddAdmin&&* 2
(&&2 3
createAdminDto&&3 A
)&&A B
;&&B C
return(( 
Ok(( 
((( 
new(( 
ApiResponse(( %
<((% &
AdminResponseDto((& 6
?((6 7
>((7 8
(((8 9
StatusCodes)) 
.)) 
Status200OK)) '
,))' (
res** 
,** 
null++ 
,++ 
$str,, /
),,/ 0
),,0 1
;,,1 2
}-- 	
[// 	
	Authorize//	 
(// 
Roles// 
=// 
$str// "
)//" #
]//# $
[00 	
HttpGet00	 
(00 
$str00 
)00  
]00  !
public11 
async11 
Task11 
<11 
IActionResult11 '
>11' (

GetAdminId11) 3
(113 4
[114 5
	FromQuery115 >
]11> ?
long11@ D
adminId11E L
)11L M
{22 	
if44 
(44 
adminId44 
<=44 
$num44 
)44 
{55 
return66 

BadRequest66 !
(66! "
new66" %
ApiResponse66& 1
<661 2
string662 8
?668 9
>669 :
(66: ;
StatusCodes77 
.77  
Status400BadRequest77  3
,773 4
$str88 
,88 
$str99 
,99 
$str:: )
)::) *
)::* +
;::+ ,
};; 
var<< 
res<< 
=<< 
await<< 
_adminService<< )
.<<) *
GetAdminById<<* 6
(<<6 7
adminId<<7 >
)<<> ?
;<<? @
return== 
Ok== 
(== 
new== 
ApiResponse== %
<==% &
AdminResponseDto==& 6
?==6 7
>==7 8
(==8 9
StatusCodes>> 
.>> 
Status200OK>> '
,>>' (
res?? 
,?? 
null@@ 
,@@ 
$strAA -
)AA- .
)AA. /
;AA/ 0
}BB 	
[DD 	
	AuthorizeDD	 
(DD 
RolesDD 
=DD 
$strDD "
)DD" #
]DD# $
[EE 	
HttpGetEE	 
(EE 
$strEE >
)EE> ?
]EE? @
publicFF 
asyncFF 
TaskFF 
<FF 
IActionResultFF '
>FF' (
GetAllAdminFF) 4
(FF4 5
intFF5 8

pageNumberFF9 C
,FFC D
intFFE H
pageSizeFFI Q
)FFQ R
{GG 	
varHH 
resHH 
=HH 
awaitHH 
_adminServiceHH )
.HH) *
GetAllAdminHH* 5
(HH5 6

pageNumberHH6 @
,HH@ A
pageSizeHHB J
,HHJ K
falseHHL Q
)HHQ R
;HHR S
returnII 
OkII 
(II 
newII 
ApiResponseII %
<II% &
IEnumerableII& 1
<II1 2
AdminII2 7
>II7 8
?II8 9
>II9 :
(JJ 
StatusCodesJJ 
.JJ 
Status200OKJJ (
,JJ( )
resKK 
,KK 
nullLL 
,LL 
$strMM 0
)MM0 1
)MM1 2
;MM2 3
}NN 	
}OO 
}PP 